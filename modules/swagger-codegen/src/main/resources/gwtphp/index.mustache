<?php
/**
 * Auto generated code from swagger api description. DO NOT EDIT !!!!
 */
require __DIR__ . '/../../vendor/autoload.php';
require '../../scripts/bootstrap.php';

$app = new \Slim\Slim();

try {
    $auth = {{invokerPackage}}_Api_Auth::init($app->request());
} catch (Exception $e) {
    http_response_code($e->getCode());
    echo $e->getMessage();
    exit();
}

{{#apiInfo}}{{#apis}}{{#operations}}{{#operation}}
/*
{{notes}}
*/
$app->{{httpMethod}}('{{#fnSlimPath}}{{path}}{{/fnSlimPath}}', function ({{#pathParams}}${{paramName}}{{#hasMore}}, {{/hasMore}}{{/pathParams}}) use ($app, $auth) {
	$params = new RestApi_Params($app->request());
	$response = new RestApi_Response($app->response());
	
	try {
		{{#allParams}}{{^isPathParam}}{{^isBodyParam}}$params->check('{{paramName}}', {{#required}}true{{/required}}{{^required}}false{{/required}}, '{{defaultValue}}', '{{dataType}}', {{#isEnum}}array({{#allowableValues}}{{#values}}'{{.}}'{{^-last}}, {{/-last}}{{/values}}{{/allowableValues}}){{/isEnum}}{{^isEnum}}null{{/isEnum}});
		{{/isBodyParam}}{{/isPathParam}}{{/allParams}}
		{{#authMethods}}{{#scopes}}$auth->checkScope('{{scope}}');{{/scopes}}
		{{/authMethods}}{{#bodyParam}}{{^dataType}}
		$data = $params->getBody(){{/dataType}}{{#dataType}}
		$data = new {{dataType}}($params->getBody());
		$data->check();
		{{/dataType}}{{/bodyParam}}
    	
    	$handler = new {{#fnClassName}}{{operationId}}{{/fnClassName}}($params);
    	$response->setResult($handler->{{#fnMethodName}}{{operationId}}{{/fnMethodName}}({{#pathParams}}${{paramName}}{{#hasMore}}, {{/hasMore}}{{/pathParams}}{{#bodyParam}}{{#hasPathParams}}, {{/hasPathParams}}$data{{/bodyParam}}));	
    } catch (Exception $e) {
    	$response->setError($e);
    }
});

{{/operation}}{{/operations}}{{/apis}}{{/apiInfo}}

$app->run();

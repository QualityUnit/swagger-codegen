/**
 * Copyright 2007 Quality Unit s.r.o.
 * 
 * Licensed under the Quality Unit, s.r.o. Standard End User License Agreement,
 * Version 1.0 (the "License"); you may not use this file except in compliance
 * with the License. You may obtain a copy of the License at
 * http://www.qualityunit.com/licenses/license
 * 
 */

package {{apiPackage}};

import com.google.gwt.core.client.*;
import com.google.gwt.http.client.*;

import {{supportPackage}}.*;
import {{modelPackage}}.*;

import java.util.*;

/**
 * Auto generated code from swagger api description. DO NOT EDIT !!!!
 * Codegen version: {{codegenVersion}}
 */
{{#operations}}class {{classname}} {

    {{#operation}}
    public static void {{gwtphpClientMethodName}}({{#allParams}}{{dataType}} {{paramName}}, {{/allParams}}final ApiCallback<{{#fnJsArray}}{{returnType}}{{/fnJsArray}}> callback) {
        String callUrl = "{{path}}";
        {{#pathParams}}
        callUrl = callUrl.replace("{" + "{{baseName}}" + "}", {{paramName}});
        {{/pathParams}}

        RequestCallback requestCallback = new RequestCallback() {
            public void onError(Request request, Throwable exception) {
                callback.onError(exception.getLocalizedMessage());
            }
            public void onResponseReceived(Request request, Response response) {
                switch (response.getStatusCode()) {
                {{#responses}}
                    {{#dataType}}
                        {{^isWildcard}}case {{code}}:{{/isWildcard}}
                        {{#isWildcard}}default:{{/isWildcard}}
                            callback.{{#fnCallbackMethod}}{{code}}{{/fnCallbackMethod}}(({{#fnJsArray}}{{dataType}}{{/fnJsArray}}) JsonUtils.safeEval(response.getText()));
                            break;
                    {{/dataType}}
                {{/responses}}
                }
            }
        };

        Map<String, List<String>> queryParams = new HashMap<String, List<String>>();
        {{#queryParams}}
        queryParams.put("{{baseName}}", Arrays.asList({{paramName}}));
        {{/queryParams}}

        {{#bodyParams}}
        String body = JsonUtils.stringify({{paramName}});
        {{/bodyParams}}
        {{^bodyParams}}
        String body = "";
        {{/bodyParams}}

        Map<String, String> headers = new HashMap<String, String>();
        headers.put("Content-Type", "application/json");
        headers.put("Accept", "application/json");
        {{#headerParams}}
        headers.put("{{baseName}}", {{paramName}});
        {{/headerParams}}

        ApiClient.callApi(RequestBuilder.{{#fnUpperCase}}{{httpMethod}}{{/fnUpperCase}}, callUrl, body, headers, queryParams, requestCallback);
    }
    {{/operation}}
}
{{/operations}}
